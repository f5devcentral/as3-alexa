{"version":3,"sources":["home/homeServices.js"],"names":["angular","module","$resource","GraphService","graph","data","processData","message","tenants","res","nodes","push","id","group","type","i","length","name","bigipLink","source","links","applications","k","status","appLink","target","services","m","serviceLink","pool","virtualServers","poolMembers","p","vsLink","poolLink","q","ip","memberLink","query","list","graphResource","headers","method","isArray","factory"],"mappings":"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","file":"../../components/home/homeServices.js","sourcesContent":["/*\n * Copyright (c) 2018, F5 Networks, Inc. All rights reserved.\n * No part of this software may be reproduced or transmitted in any\n * form or by any means, electronic or mechanical, for any purpose,\n * without express written permission of F5 Networks, Inc.\n */\n(function() {\n    angular.module('homeServices', []).\n    factory('GraphService', GraphService);\n\n    function GraphService($resource) {\n\n        const graph = {};\n\n\n        graph.processData = (data) => {\n            const tenants = data.message.tenants;\n            const res = {\n                nodes: [],\n                links: []\n            };\n\n            // For now manually adding BIG IP\n            res.nodes.push({\n                id: 'BIG IP',\n                group: 50,\n                type: 'bigip',\n                status: 'online'\n            });\n\n            // Create links between Big IP and tenants\n            for (let i = 0; i < tenants.length; i++) {\n                res.nodes.push({\n                    id: tenants[i].name,\n                    group: 40,\n                    type: 'tenant',\n                    status: 'online' // All tenants show 'online' status\n                });\n\n                // Create links between Big IP and proxies\n                const bigipLink = {\n                    source: 'BIG IP',\n                    target: tenants[i].name\n                };\n                res.links.push(bigipLink);\n\n\n                const applications = tenants[i].applications;\n                for (let k = 0; k < applications.length; k++) {\n                    res.nodes.push({\n                        id: `${tenants[i].name}/${applications[k].name}`,\n                        group: 30,\n                        type: 'application',\n                        status: 'online' // All applications show 'online' status\n                    });\n\n                    // Create links between Tenant and applications\n                    const appLink = {\n                        source: tenants[i].name,\n                        target: `${tenants[i].name}/${applications[k].name}`\n                    };\n                    res.links.push(appLink);\n\n\n                    const services = applications[k].services;\n                    for (let m = 0; m < services.length; m++) {\n\n                        res.nodes.push({\n                            id: `${tenants[i].name}/${applications[k].name}/${services[m].name}`,\n                            group: 20,\n                            type: 'service',\n                            status: 'online' // All applications show 'online' status\n                        });\n\n\n                        // Create links between Application and Service\n                        const serviceLink = {\n                            source: `${tenants[i].name}/${applications[k].name}`,\n                            target: `${tenants[i].name}/${applications[k].name}/${services[m].name}`\n                        };\n                        res.links.push(serviceLink);\n\n\n                        // Build Virtual Server and Pool Members\n                        const virtualServers = services[m].virtualServers;\n                        const pool = services[m].pool;\n                        let poolMembers = '';\n                        if(pool) {\n                            poolMembers = services[m].pool.poolMembers;\n                        }\n\n                        // Add pool node\n                        if (pool) {\n                            res.nodes.push({\n                                id: `${tenants[i].name}/${applications[k].name}/${services[m].name}/${pool.name}`,\n                                group: 10,\n                                type: 'pool',\n                                status: 'online' // All pool show 'online' status\n                            });\n                        }\n\n                        for (let p = 0; p < virtualServers.length; p++) {\n                            res.nodes.push({\n                                id: `${tenants[i].name}/${applications[k].name}/${services[m].name}/${virtualServers[p].name}`,\n                                group: 15,\n                                type: 'virtualServer',\n                                status: 'online' // All virtual show 'online' status\n                            });\n\n                            // Create links between Service and Virtual Server\n                            const vsLink = {\n                                source: `${tenants[i].name}/${applications[k].name}/${services[m].name}`,\n                                target: `${tenants[i].name}/${applications[k].name}/${services[m].name}/${virtualServers[p].name}`\n                            };\n                            res.links.push(vsLink);\n\n                            // Build link between virtual servers and pool\n                            if(pool) {\n                                const poolLink = {\n                                    source: `${tenants[i].name}/${applications[k].name}/${services[m].name}/${pool.name}`,\n                                    target: `${tenants[i].name}/${applications[k].name}/${services[m].name}/${virtualServers[p].name}`\n                                };\n                                res.links.push(poolLink);\n                            }\n                        }\n                        if (poolMembers && poolMembers.length > 0) {\n                            for (let q = 0; q < poolMembers.length; q++) {\n                                res.nodes.push({\n                                    id: poolMembers[q].name + q,\n                                    group: 5,\n                                    type: 'poolMember',\n                                    status: poolMembers[q].status, // Pool Member show 'online' status for now\n                                    ip: poolMembers[q].name\n                                });\n\n                                // Create links between Pool and Pool Members\n                                const memberLink = {\n                                    source: `${tenants[i].name}/${applications[k].name}/${services[m].name}/${pool.name}`,\n                                    target: poolMembers[q].name + q\n                                };\n                                res.links.push(memberLink);\n\n                            }\n                        }\n                    }\n                }\n            }\n\n            return { list: [res] };\n        };\n\n        graph.graphResource = $resource('https://6e3tjgtl1a.execute-api.us-west-2.amazonaws.com/default/as3Services', {}, {\n            query: {\n                method: 'GET',\n                isArray: false\n            },\n            headers: { Authorization: `Basic ${window.btoa(`${'admin'}:${'admin'}`)}` }\n\n        });\n\n        return graph;\n    }\n\n}());"]}