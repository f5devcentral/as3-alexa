"use strict";angular.module("homeDirectives",[]).directive("customGraph",["$window",function(x){return{restrict:"EA",scope:{data:"="},templateUrl:"partials/templates/graph.html",link:function(r,v,t){r.$watch("data",function(r){if(r){var o=x.d3,t=v.find("svg"),e=o.select(t[0]),n=e.attr("width"),u=e.attr("height"),i=o.tip().attr("class","d3-tip").offset([-10,0]).html(function(r){return 50===r.group?"<span>"+r.id+"</span>":40===r.group?"<pre>Tenant:<span>"+r.id+"</span><code>"+JSON.stringify(r.schema,void 0,2)+"</code></pre>":30===r.group?"<pre>Application:<span>"+r.id+"</span><code>"+JSON.stringify(r.schema,void 0,2)+"</code></pre>":20===r.group?"<pre>Service:<span>"+r.id+"</span><pre><code>"+JSON.stringify(r.schema,void 0,2)+"</code></pre>":15===r.group?"<pre>Virtual Server:<span>"+r.id+"</span><code>"+JSON.stringify(r.schema,void 0,2)+"</code></pre>":10===r.group?"<pre>Pool:<span>"+r.id+"</span><code>"+JSON.stringify(r.schema,void 0,2)+"</code></pre>":5===r.group?"<pre>Pool Member:<span>"+r.id+"</span><code>"+JSON.stringify(r.schema,void 0,2)+"</code></pre>":void 0});e.call(i),e.selectAll("circle").transition().duration(750).style("opacity",0).remove(),e.selectAll("line").transition().duration(750).style("opacity",0).remove(),e.selectAll("text").transition().duration(750).style("opacity",0).remove(),e.transition().duration(750).style("opacity",1);var a=r,p=a.nodes,c=a.links,s=a.nodes[0];s.x=n/2,s.y=u/2,s.fixed=!0;var g=o.forceSimulation().force("link",o.forceLink().id(function(r){return r.id}).distance(function(r){return 50===r.source.group&&40===r.target.group?60:40===r.source.group||30===r.source.group||20===r.source.group||15===r.source.group&&40===r.target.group||30===r.target.group||20===r.target.group||15===r.target.group?45:10===r.source.group||5===r.source.group&&10===r.target.group||5===r.target.group?40:void 0})).force("charge",o.forceManyBody().strength(function(r){return 50===r.group?-60:40===r.group?-50:30===r.group?-40:-30})).force("center",o.forceCenter(n/2,u/2)).force("collide",o.forceCollide().radius(function(r){return 50===r.group?30:40===r.group?20:30===r.group?15:20===r.group?10:8})),d=e.append("g").attr("class","links").selectAll("line").data(c).enter().append("line").attr("stroke-width",function(r){return 2}),l=e.append("g").attr("class","node"),f=l.selectAll("circle").data(p).enter().append("circle").attr("r",function(r){return 50===r.group?25:40===r.group?16:30===r.group?15:20===r.group?14:15===r.group?13:10===r.group?12:5===r.group?10:6}).attr("fill",function(r){if(50===r.group)return"#c7062b";if(40===r.group)return"#0f71b9";if(30===r.group)return"#0aa6ea";if(20===r.group)return"#3dc1f9";if(15===r.group)return"#6fd4ff";if(10===r.group)return"#97e0ff";if(5===r.group){if("offline"===r.status||" "===r.status||""===r.status)return"#e21c1c";if("online"===r.status)return"#3d9e3d"}}).attr("class",function(r){if("BIG IP"===r.id)return"fixed-node"}).on("mouseover",function(r){var t=o.event.x+100+"px",e=o.event.y+50+"px";i.show(r),i.style("top",e),i.style("left",t)}).on("mouseout",i.hide).call(o.drag().on("start",function(r){o.event.active||g.alphaTarget(.3).restart(),r.fx=r.x,r.fy=r.y}).on("drag",function(r){r.fx=o.event.x,r.fy=o.event.y}).on("end",function(r){o.event.active||g.alphaTarget(0),r.fx=null,r.fy=null})),y=l.selectAll("text").data(a.nodes).enter().append("text").text(function(r){return 50===r.group?r.id:40===r.group?"T":30===r.group?"A":20===r.group?"S":15===r.group?"V":10===r.group?"P":5===r.group?"M":void 0}).style("fill","white").style("font-size","10px");g.nodes(a.nodes).on("tick",function(){d.attr("x1",function(r){return r.source.x}).attr("y1",function(r){return r.source.y}).attr("x2",function(r){return r.target.x}).attr("y2",function(r){return r.target.y}),f.attr("cx",function(r){return r.x=Math.max(10,Math.min(n-10,r.x))}).attr("cy",function(r){return r.y=Math.max(10,Math.min(u-10,r.y))}),y.attr("x",function(r){return 50===r.group?r.x-16:40===r.group||30===r.group||20===r.group||15===r.group?r.x-3:10===r.group||5===r.group?r.x-3:void 0}).attr("y",function(r){return 50===r.group?r.y+3:40===r.group||30===r.group||20===r.group||15===r.group?r.y+3:10===r.group||5===r.group?r.y+3:void 0})}),g.force("link").links(a.links)}})}}}]);
//# sourceMappingURL=../../maps/home/homeDirectives.js.map
